<% if @list.thumbnail.key? %>
  <header class="container-fluid hero-banner justify-content-center align-items-center", style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(<%= cl_image_path(@list.thumbnail.key) %>)">
    <h1><%= @list.name %></h1>
  </header>
<% else %>
  <header class="container-fluid hero-banner justify-content-center align-items-center", style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5))">
    <h1><%= @list.name %></h1>
  </header>
<% end %>

<%# MODAL FOR THUMBNAIL %>
<div class="modal" id="thumbnailModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Create your list</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <%= simple_form_for(@list) do |f|  %>
          <%= f.input :thumbnail, as: :file %>
          <%= f.submit %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<button class="btn btn-success banner-button", data-bs-toggle="modal" data-bs-target="#thumbnailModal">Change Header</button>

<div class="container">
  <%= link_to "Add a movie", new_list_bookmark_path(@list), class: "btn btn-success" %>
  <div class="row my-3">
        <% @list.bookmarks.each do |item|  %>
          <div class="col-md-4 mb-4">
            <div class="card h-100">
              <img src="<%= item.movie.poster_url %>" class="card-img-top" alt="movie poster">
              <div class="card-body d-flex justify-content-between flex-column gap-4">
                <div>
                  <h5 class="card-title"><%= item.movie.title %></h5>
                  <p class="card-text"><%= item.movie.overview %></p>
                </div>
                <div>
                  <i class="fa-solid fa-star" style="color: #FFD43B;"></i>
                  <span><%= item.movie.rating %>/10</span>
                  <%= link_to "Delete", bookmark_path(item) ,data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-danger" %>
                  <div class="card-footer mt-2">
                    <p>"<%= item.comment %>"</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
  </div>

  <h2 id="comments_section">Comments</h2>

  <div class="border rounded p-4">
    <% @list.comments.each do |comment| %>
    <div class="comment d-flex gap-2 p-2 mb-2 border rounded">
      <i class="fa-solid fa-quote-right"></i>
      <p><%= comment.content %></p>
    </div>
    <% end %>

    <%= simple_form_for([@list, @comment]) do |f| %>
      <div class="form-group">
        <%= f.input :content, label: "Add a comment", input_html: { class: 'form-control' } %>
      </div>
      <div class="form-group">
        <%= f.button :submit, "Post Comment", class: "btn btn-success" %>
      </div>
    <% end %>
  </div>


  <%= link_to "Go back", lists_path, class: "text-decoration-underline py-3 fs-6" %>
</div>
